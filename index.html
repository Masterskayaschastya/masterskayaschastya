<!DOCTYPE html>

<html lang="ru">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>–ú–∞—Å—Ç–µ—Ä—Å–∫–∞—è —Å—á–∞—Å—Ç—å—è</title>
<link href="https://fonts.googleapis.com/css2?family=UnifrakturCook:wght@700&amp;display=swap" rel="stylesheet"/>
<style>
.hidden{display:none;}

    body {
      margin: 0;
      font-family: 'Arial', sans-serif;
      background-color: #f7f5fa;
      color: #2e2e2e;
    }
    header {
      background-color: #e5d4f5;
      padding: 20px;
      text-align: center;
    }
    header h1 {
      font-family: 'UnifrakturCook', cursive;
      font-size: 3em;
      color: #6a1b9a;
      margin: 0;
    }
    nav {
      background-color: #d8b4e2;
      padding: 10px 0;
      text-align: center;
    }
    nav a {
      margin: 0 15px;
      text-decoration: none;
      color: #4a148c;
      font-weight: bold;
      font-size: 1.1em;
    }
    .banner {
  width: 100%;
  background-color: #d1b3e0;
  display: block;
  overflow: hidden;
}
    .about {
      max-width: 900px;
      margin: 50px auto;
      padding: 20px;
      background-color: #ffffff;
      border-left: 10px solid #d8b4e2;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    .about h2 {
      font-family: 'UnifrakturCook', cursive;
      color: #6a1b9a;
      font-size: 2em;
    }
    .about p {
      line-height: 1.6;
      font-size: 1.1em;
    }
    .catalog {
      max-width: 1000px;
      margin: 50px auto;
      padding: 20px;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 20px;
    }
    .catalog-item {
      background-color: #fff;
      padding: 15px;
      border-radius: 10px;
      border: 2px solid #e1bee7;
      text-align: center;
      box-shadow: 0 0 5px rgba(0,0,0,0.05);
    }
    .catalog-item h3 {
      color: #7b1fa2;
      font-family: 'UnifrakturCook', cursive;
    }
    .catalog-item img {
      width: 100%;
      height: 180px;
      object-fit: cover;
      border-radius: 8px;
      margin-bottom: 10px;
    }
    footer {
      background-color: #e5d4f5;
      text-align: center;
      padding: 10px;
      margin-top: 50px;
      font-size: 0.9em;
    }
      .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0,0,0,0.5);
    }
    .modal-content {
      background-color: #fff;
      margin: 10% auto;
      padding: 20px;
      border: 1px solid #888;
      width: 80%;
      max-width: 600px;
      border-radius: 10px;
      position: relative;
    }
    .close {
      color: #aaa;
      position: absolute;
      top: 10px;
      right: 20px;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
    }
    .close:hover {
      color: #000;
    }
    .product-card {
      background-color: #f5f2f8;
      padding: 15px;
      border-radius: 8px;
      margin-top: 20px;
      text-align: center;
    }
    .product-card img {
      width: 100%;
      max-width: 250px;
      height: auto;
      border-radius: 6px;
      margin-bottom: 10px;
    }
    .product-card button {
      background-color: #ab47bc;
      color: #fff;
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 1em;
    }
    .product-card button:hover {
      background-color: #8e24aa;
    }
    .cart-panel {
      position: fixed;
      right: 20px;
      bottom: 20px;
      background-color: #fff;
      border: 2px solid #d8b4e2;
      border-radius: 10px;
      padding: 15px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
      width: 300px;
      z-index: 2000;
      max-height: 400px;
      overflow-y: auto;
      display: none;
    }
    .cart-panel h3 {
      margin-top: 0;
      color: #6a1b9a;
    }
    .cart-item {
      display: flex;
      justify-content: space-between;
      margin: 5px 0;
      font-size: 0.95em;
    }
    .cart-total {
      font-weight: bold;
      margin-top: 10px;
      text-align: right;
    }
    .cart-panel button {
      margin-top: 10px;
      background-color: #ab47bc;
      color: #fff;
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      cursor: pointer;
      width: 100%;
    }
    .cart-panel button:hover {
      background-color: #8e24aa;
    }

@media (max-width: 768px) {
  nav a {
    display: block;
    margin: 10px 0;
  }
  .catalog {
    grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
    padding: 10px;
  }
  .modal-content {
    width: 95% !important;
    margin: 20% auto;
  }
  .product-card {
    flex: 1 1 100% !important;
    max-width: 100% !important;
  }
  .cart-panel {
    width: 90% !important;
    right: 5% !important;
    bottom: 10px !important;
  }
  input[type="text"], input[type="tel"] {
    font-size: 1em;
  }
  .banner img {
    width: 100%;
    height: auto;
  }
}
</style>

<style>
.site-footer {
  background-color: #e5d4f5;
  padding: 20px;
  text-align: center;
  margin-top: 40px;
  border-top: 2px solid #d8b4e2;
}
.site-footer a {
  color: #6a1b9a;
  text-decoration: none;
  font-weight: bold;
}
.site-footer a:hover {
  text-decoration: underline;
}
/* make sure footer stays above page background and below modals */
.site-footer { position: relative; z-index: 1; }
</style>

</head>
<body>
<header><div style="display:flex; align-items:center; justify-content:center; gap:15px; flex-wrap:wrap;"><img loading="lazy" alt="–õ–æ–≥–æ—Ç–∏–ø" src="assets/images/logo.jpg" style="height:60px; vertical-align:middle; margin-right:15px;"/><h1 style="margin: 0;">–ú–∞—Å—Ç–µ—Ä—Å–∫–∞—è —Å—á–∞—Å—Ç—å—è</h1></div></header>
<nav>
<a href="#">–ì–ª–∞–≤–Ω–∞—è</a>
<a href="#catalog">–ö–∞—Ç–∞–ª–æ–≥</a>
<a href="#about">–û –Ω–∞—Å</a>
<a href="#contacts">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
<a href="#" id="cartLink" onclick="openModal('cartModal'); return false;">–ö–æ—Ä–∑–∏–Ω–∞ (0)</a></nav>
<section class="about" id="about">
<h2>–û –Ω–∞—Å</h2>
<p>
      –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –º–∞–ª–µ–Ω—å–∫—É—é –º–∞—Å—Ç–µ—Ä—Å–∫—É—é. –†–∞–¥–∞ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –∫–∞–ª–µ–π–¥–æ—Å–∫–æ–ø —Å—É–º–æ–∫, –∫–ª–∞—Ç—á–µ–π, –∏–Ω—Ç–µ—Ä—å–µ—Ä–Ω—ã—Ö –∫–æ—Ä–∑–∏–Ω,
      –∏–≥—Ä—É—à–µ–∫ –∏ —Å—É–≤–µ–Ω–∏—Ä–æ–≤ —Ä—É—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã. –í—Å–µ –º–æ–∏ —Ä–∞–±–æ—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω—ã —Å –ª—é–±–æ–≤—å—é, –æ—Ç –¥—É—à–∏, —Å –¥—É—à–æ–π –∏ –¥–ª—è –¥—É—à–∏.
      –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–º —ç–∫–∑–µ–º–ø–ª—è—Ä–µ. –¢–æ—á–Ω—ã–π –ø–æ–≤—Ç–æ—Ä –∏—Å–∫–ª—é—á—ë–Ω. –ï—Å—Ç—å –≤ –Ω–∞–ª–∏—á–∏–∏ –∏ –ø–æ–¥ –∑–∞–∫–∞–∑.
      –ù–æ –∫–∞–∂–¥–∞—è —Ä–∞–±–æ—Ç–∞ —É–Ω–∏–∫–∞–ª—å–Ω–∞, –∏–º–µ–µ—Ç —Å–≤–æ–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä, –Ω–µ—Å—ë—Ç –ø–æ–∑–∏—Ç–∏–≤–Ω—É—é —ç–Ω–µ—Ä–≥–µ—Ç–∏–∫—É. –¢–µ–ø–ª—ã–µ, —É—é—Ç–Ω—ã–µ –ø–æ–¥–∞—Ä–∫–∏ –¥–ª—è —Å–µ–±—è
      –ª—é–±–∏–º—ã—Ö, –¥–ª—è –±–ª–∏–∑–∫–∏—Ö –∏ –¥—Ä—É–∑–µ–π —É–ø–∞–∫–æ–≤–∞–Ω—ã –≤ –ø–æ–¥–∞—Ä–æ—á–Ω—É—é –∫–æ—Ä–æ–±–∫—É. –ö–∞–∂–¥—ã–π –º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ –∑–¥–µ—Å—å —á—Ç–æ-—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–µ –¥–ª—è —Å–µ–±—è.
      –í–ø—É—Å—Ç–∏—Ç–µ –≤ —Å–≤–æ–π –¥–æ–º –°—á–∞—Å—Ç—å–µ.
    </p>
</section>
<section class="catalog" id="catalog">
<div class="catalog-item" onclick="openModal('bagsModal')">
<img loading="lazy" alt="–í—è–∑–∞–Ω—ã–µ —Å—É–º–∫–∏" src="assets/images/bags.jpeg"/>
<h3>–í—è–∑–∞–Ω—ã–µ —Å—É–º–∫–∏</h3>
</div>
<div class="catalog-item" onclick="openModal('basketsModal')">
<img loading="lazy" alt="–ö–æ—Ä–∑–∏–Ω–∫–∏" src="assets/images/b.jpeg"/>
<h3>–ö–æ—Ä–∑–∏–Ω–∫–∏</h3>
</div>
<div class="catalog-item" onclick="openModal('teaSetModal')">
<img loading="lazy" alt="–ù–∞–±–æ—Ä—ã –¥–ª—è —á–∞–µ–ø–∏—Ç–∏—è" src="assets/images/tea-sets.jpeg"/>
<h3>–ù–∞–±–æ—Ä—ã –¥–ª—è —á–∞–µ–ø–∏—Ç–∏—è</h3>
</div>
<div class="catalog-item" onclick="openModal('softToysModal')">
<img loading="lazy" alt="–ú—è–≥–∫–∏–µ –∏–≥—Ä—É—à–∫–∏" src="assets/images/toys11.jpeg"/>
<h3>–ú—è–≥–∫–∏–µ –∏–≥—Ä—É—à–∫–∏</h3>
</div>
<div class="catalog-item" onclick="openModal('boxesModal')"><img loading="lazy" alt="–®–∫–∞—Ç—É–ª–∫–∏" src="assets/images/p.png"/><h3>–®–∫–∞—Ç—É–ª–∫–∏</h3></div><div class="catalog-item" onclick="openModal('souvenirsModal')"><img loading="lazy" alt="–°—É–≤–µ–Ω–∏—Ä—ã" src="assets/images/gift.jpeg"/><h3>–°—É–≤–µ–Ω–∏—Ä—ã</h3></div><div class="catalog-item" onclick="openModal('christmasModal')"><img loading="lazy" alt="–Å–ª–æ—á–Ω—ã–µ –∏–≥—Ä—É—à–∫–∏" src="assets/images/chris1.jpeg"/><h3>–Å–ª–æ—á–Ω—ã–µ –∏–≥—Ä—É—à–∫–∏</h3></div></section>
<!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
<style>
  .product-list {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    justify-content: center;
  }
  .product-card {
    background-color: #f5f2f8;
    padding: 15px;
    border-radius: 8px;
    text-align: center;
    flex: 1 1 calc(33% - 40px);
    max-width: 200px;
    box-sizing: border-box;
  }
</style>
<!-- –ü—Ä–∏–º–µ—Ä –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Å –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–º–∏ —Ç–æ–≤–∞—Ä–∞–º–∏ -->
<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ: –ö–æ—Ä–∑–∏–Ω–∫–∏ -->
<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ: –ü–æ–¥—Å—Ç–∞–≤–∫–∏ -->
</div>
</div>
</div>
</div><form action="https://formspree.io/f/xpwrrowl" class="modal" id="cartModal" method="POST" style="display: none;"><div class="modal-content"><span class="close" onclick="closeModal('cartModal')">√ó</span>
<h3>–ö–æ—Ä–∑–∏–Ω–∞</h3>
<div id="cartItems"></div>
<div class="cart-total" id="cartTotal">–ò—Ç–æ–≥–æ: 0 ‚ÇΩ</div>
<div class="promo-row" style="margin:10px 0; display:flex; gap:8px; align-items:center; flex-wrap:wrap;">
  <input id="promoCodeInput" type="text" placeholder="–ü—Ä–æ–º–æ–∫–æ–¥" style="padding:8px 10px; border:1px solid #ccc; border-radius:5px; min-width:200px;">
  <button type="button" onclick="applyPromo()" style="padding:8px 12px; border-radius:6px; border:1px solid #b38cd9; background:#e9dbf7; cursor:pointer;">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
  <span id="promoStatus" class="promo-status" style="min-height:1em;"></span>
</div>
<div class="cart-total" id="cartDiscount" style="display:none;">–°–∫–∏–¥–∫–∞: -0 ‚ÇΩ</div>
<div class="cart-total" id="cartGrandTotal">–ö –æ–ø–ª–∞—Ç–µ: 0 ‚ÇΩ</div>

<input id="orderInput" name="order" type="hidden"/>
<input id="customerAddress" name="address" placeholder="–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏" required="" style="width: 100%; padding: 8px; margin-top: 10px; border: 1px solid #ccc; border-radius: 5px;" type="text"/>
<input id="customerName" name="name" placeholder="–í–∞—à–µ –§–ò–û" required="" style="width: 100%; padding: 8px; margin-top: 10px; border: 1px solid #ccc; border-radius: 5px;" type="text"/>
<input id="customerPhone" name="phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω" required="" style="width: 100%; padding: 8px; margin-top: 10px; border: 1px solid #ccc; border-radius: 5px;" type="tel"/>
<button type="submit">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
<button onclick="manualDownload()" type="button">–°–∫–∞—á–∞—Ç—å —á–µ–∫</button>
</div></form><script>
let cart = [];

function updateCartCounter() {
  const counter = cart.length;
  const link = document.getElementById('cartLink');
  if (link) link.textContent = `–ö–æ—Ä–∑–∏–Ω–∞ (${counter})`;
}

function addToCart(name, price) {
  console.log('–î–æ–±–∞–≤–ª—è–µ–º –≤ –∫–æ—Ä–∑–∏–Ω—É:', name, price);
  cart.push({ name, price });
  renderCart();
  updateCartCounter();
  document.getElementById('cartModal').style.display = 'block';
}

function removeFromCart(index) {
  cart.splice(index, 1);
  renderCart();
  updateCartCounter();
}


function renderCart() {
  const cartItems = document.getElementById('cartItems');
  const cartTotal = document.getElementById('cartTotal');
  const cartDiscount = document.getElementById('cartDiscount');
  const cartGrandTotal = document.getElementById('cartGrandTotal');

  if (cartItems) cartItems.innerHTML = '';
  let subtotal = 0;

  (Array.isArray(cart) ? cart : []).forEach((item, index) => {
    const div = document.createElement('div');
    div.className = 'cart-item';
    div.innerHTML = `<span>${item.name}</span><span>${item.price} ‚ÇΩ</span>
      <button onclick="removeFromCart(${index})" style='margin-left:10px;background:none;border:none;color:red;cursor:pointer;'>&times;</button>`;
    cartItems && cartItems.appendChild(div);
    subtotal += Number(item.price)||0;
  });

  const totals = getTotals();
  if (cartTotal) cartTotal.textContent = `–°—É–º–º–∞: ${formatRub(subtotal)}`;
  if (cartDiscount) {
    if (totals.discount > 0) {
      cartDiscount.style.display = '';
      cartDiscount.textContent = `–°–∫–∏–¥–∫–∞: -${formatRub(totals.discount)}`;
    } else {
      cartDiscount.style.display = 'none';
    }
  }
  if (cartGrandTotal) cartGrandTotal.textContent = `–ö –æ–ø–ª–∞—Ç–µ: ${formatRub(totals.total)}`;
}


function clearCart() {
  cart.length = 0;
  renderCart();
  updateCartCounter();
  document.getElementById('cartModal').style.display = 'none';
}


function prepareFormData(event) {
  event.preventDefault();

  const name = document.getElementById('customerName').value.trim();
  const phone = document.getElementById('customerPhone').value.trim();
  const address = document.getElementById('customerAddress').value.trim();

  if (!name || !phone || !address) {
    alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è.');
    return;
  }

  if (!Array.isArray(cart) || cart.length === 0) {
    alert('–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞!');
    return;
  }

  const totals = getTotals();
  const lines = cart.map(item => `${item.name} - ${item.price}‚ÇΩ`);
  lines.push('');
  lines.push(`–°—É–º–º–∞: ${totals.subtotal}‚ÇΩ`);
  if (appliedPromo) {
    lines.push(`–ü—Ä–æ–º–æ–∫–æ–¥: ${appliedPromo} (-10%)`);
    lines.push(`–°–∫–∏–¥–∫–∞: -${totals.discount}‚ÇΩ`);
  }
  lines.push(`–ö –æ–ø–ª–∞—Ç–µ: ${totals.total}‚ÇΩ`);
  lines.push('');
  lines.push(`–§–ò–û: ${name}`);
  lines.push(`–¢–µ–ª–µ—Ñ–æ–Ω: ${phone}`);
  lines.push(`–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏: ${address}`);

  const orderDetails = lines.join('\n');
  document.getElementById('orderInput').value = orderDetails;

  alert('–í–∞—à –∑–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω! –°–ø–∞—Å–∏–±–æ!');
  document.getElementById('cartModal').submit();
  if (typeof downloadReceipt === 'function') {
    downloadReceipt(orderDetails);
  }

  cart.length = 0;
  appliedPromo = null;
  renderCart();
  updateCartCounter();
  document.getElementById('cartModal').style.display = 'none';
}


function downloadReceipt(orderText) {
  const blob = new Blob([orderText], { type: 'text/plain' });
  const link = document.createElement('a');
  link.href = URL.createObjectURL(blob);
  link.download = '—á–µ–∫_–∑–∞–∫–∞–∑–∞.txt';
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
}


function openModal(id) {
  // Close all modals
  document.querySelectorAll('.modal').forEach(m => m.style.display = 'none');
  const el = document.getElementById(id);
  if (!el) {
    console.warn('Modal not found:', id);
    return;
  }
  el.style.display = 'block';
  document.body.style.overflow = 'hidden';
}

function closeModal(id) {
  var el = document.getElementById(id);
  if (el) el.style.display = 'none';
  // restore scroll if nothing else open
  var anyOpen = Array.from(document.querySelectorAll('.modal')).some(m => getComputedStyle(m).display === 'block');
  if (!anyOpen) document.body.style.overflow = '';
}

window.onclick = function(event) {
  const modals = document.querySelectorAll('.modal');
  modals.forEach(modal => {
    if (event.target === modal) {
      modal.style.display = 'none';
    }
  });
}
</script><script>
// --- Injected helpers ---

// Paginator for Boxes ("–®–∫–∞—Ç—É–ª–∫–∏")
function showBoxPage(id) {
  const pages = document.querySelectorAll('#boxesModal .product-list[id^="boxesPage"]');
  pages.forEach(p => p.classList.add('hidden'));
  const target = document.getElementById(id);
  if (target) target.classList.remove('hidden');
}

// Attach submit handler to the cart form (so Enter works)
(function attachCartSubmit() {
  const modal = document.getElementById('cartModal');
  if (!modal) return;
  const form = modal.querySelector('form');
  if (form && !form.dataset.bound) {
    form.addEventListener('submit', function(e){
      if (typeof prepareFormData === 'function') {
        e.preventDefault();
        prepareFormData(e);
      }
    });
    form.dataset.bound = '1';
  }
})();

// Implement manualDownload() if a button calls it
if (typeof window.manualDownload !== 'function') {
  window.manualDownload = function() {
    try {
      const name = (document.getElementById('customerName')?.value || '').trim();
      const phone = (document.getElementById('customerPhone')?.value || '').trim();
      const address = (document.getElementById('customerAddress')?.value || '').trim();
      const cartList = (typeof window.cart !== 'undefined' && Array.isArray(window.cart)) ? window.cart : [];

      if (cartList.length === 0) {
        alert('–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞!');
        return;
      }

      const orderDetails = cartList.map(item => `${item.name} - ${item.price}‚ÇΩ`).join("\\n")
        + `\\n\\n–§–ò–û: ${name || '-'}\\n–¢–µ–ª–µ—Ñ–æ–Ω: ${phone || '-'}\\n–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏: ${address || '-'}`;

      if (typeof downloadReceipt === 'function') {
        downloadReceipt(orderDetails);
      } else {
        const blob = new Blob([orderDetails], {type: 'text/plain;charset=utf-8'});
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'order.txt';
        document.body.appendChild(a);
        a.click();
        URL.revokeObjectURL(url);
        a.remove();
      }
    } catch (err) {
      console.error('manualDownload error', err);
      alert('–ù–µ —É–¥–∞–ª–æ—Å—å —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —á–µ–∫.');
    }
  };
}

// Close any open modal on Escape
document.addEventListener('keydown', (e) => {
  if (e.key === 'Escape') {
    document.querySelectorAll('.modal').forEach(m => m.style.display = 'none');
  }
});
</script>
<script>
if (!window.__modalClickBound) {
  window.__modalClickBound = true;
  document.addEventListener('click', function(e){
    const modal = e.target.closest('.modal');
    const content = e.target.closest('.modal-content');
    if (modal && !content) {
      modal.style.display = 'none';
      const anyOpen = Array.from(document.querySelectorAll('.modal')).some(m => getComputedStyle(m).display === 'block');
      if (!anyOpen) document.body.style.overflow = '';
    }
  });
}
</script>

<script>
// === Promo & totals ===
let PROMO_CODE = localStorage.getItem('PROMO_CODE') || 'HAPPINESS10'; // <-- –º–æ–∂–Ω–æ –ø–æ–º–µ–Ω—è—Ç—å –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç
let appliedPromo = null;

function setPromoCode(code) {
  PROMO_CODE = String(code || '').trim();
  localStorage.setItem('PROMO_CODE', PROMO_CODE);
}

function getTotals() {
  const subtotal = (Array.isArray(cart) ? cart : []).reduce((s, it) => s + (Number(it.price)||0), 0);
  const discount = appliedPromo ? Math.round(subtotal * 0.10) : 0;
  const total = Math.max(0, subtotal - discount);
  return { subtotal, discount, total };
}

function formatRub(n) {
  n = Number(n)||0;
  return n.toLocaleString('ru-RU') + ' ‚ÇΩ';
}

function updatePromoStatus() {
  const el = document.getElementById('promoStatus');
  if (!el) return;
  if (appliedPromo) {
    el.textContent = '–ü—Ä–æ–º–æ–∫–æ–¥ –ø—Ä–∏–º–µ–Ω—ë–Ω: -10%';
    el.style.color = 'green';
  } else {
    el.textContent = '';
    el.style.color = '';
  }
}

function applyPromo() {
  const input = document.getElementById('promoCodeInput');
  const code = (input?.value || '').trim();
  if (!code) {
    appliedPromo = null;
  } else {
    appliedPromo = (PROMO_CODE && code.toUpperCase() === PROMO_CODE.toUpperCase()) ? code : null;
  }
  renderCart();
  updatePromoStatus();
}
</script>

<div class="modal" id="bagsModal">
<div class="modal-content">
<span class="close" onclick="closeModal('bagsModal')">√ó</span>
<h2>–í—è–∑–∞–Ω—ã–µ —Å—É–º–∫–∏</h2>
<div class="product-list">
<div class="product-card">
<img loading="lazy" alt="–°—É–º–∫–∞ –∏–∑ –ø–æ–ª–∏—ç—Ñ–∏—Ä–Ω–æ–≥–æ —à–Ω—É—Ä–∞ ¬´–†—ã–∂–∏–∫¬ª" src="assets/images/bags1.jpg"/>
<h4>–°—É–º–∫–∞ –∏–∑ –ø–æ–ª–∏—ç—Ñ–∏—Ä–Ω–æ–≥–æ —à–Ω—É—Ä–∞ ¬´–†—ã–∂–∏–∫¬ª</h4>
<p>–†–∞–∑–º–µ—Ä—ã 25*20, —Ä–µ–º–µ–Ω—å 100 —Å–º<br/>üî¥ –ü–æ–¥ –∑–∞–∫–∞–∑<br/>–¶–µ–Ω–∞: 2800 ‚ÇΩ</p>
<button onclick="addToCart('–°—É–º–∫–∞ –∏–∑ –ø–æ–ª–∏—ç—Ñ–∏—Ä–Ω–æ–≥–æ —à–Ω—É—Ä–∞ ¬´–†—ã–∂–∏–∫¬ª', 2800)" type="button">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
</div>
  </div>
</div>
<div class="modal" id="basketsModal">
<div class="modal-content">
<span class="close" onclick="closeModal('basketsModal')">√ó</span>
<h2>–ö–æ—Ä–∑–∏–Ω–∫–∏</h2>
<div class="product-list"><div class="product-card"><img loading="lazy" alt="¬´–ß–∞–π–Ω–∞—è —Ä–æ–∑–∞¬ª" src="assets/images/b1.jpeg"/><h4>¬´–ß–∞–π–Ω–∞—è —Ä–æ–∑–∞¬ª</h4><p>–ü–æ–ª–∏—ç—Ñ–∏—Ä–Ω—ã–π —à–Ω—É—Ä, –¥–µ—Ä–µ–≤–æ
üî¥ –ü–æ–¥ –∑–∞–∫–∞–∑
–¶–µ–Ω–∞: 1800 ‚ÇΩ</p><button onclick="addToCart('¬´–ß–∞–π–Ω–∞—è —Ä–æ–∑–∞¬ª', 1800)" type="button">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button></div>
  </div>
</div>
<div class="modal" id="teaSetModal">
<div class="modal-content">
<span class="close" onclick="closeModal('teaSetModal')">√ó</span>
<h2>–ù–∞–±–æ—Ä—ã –¥–ª—è —á–∞–µ–ø–∏—Ç–∏—è</h2>
<div class="product-list"><div class="product-card"><img loading="lazy" alt="–ù–∞–±–æ—Ä –¥–ª—è —á–∞–µ–ø–∏—Ç–∏—è ¬´–ì–æ—Ä—è—á–∏–π —à–æ–∫–æ–ª–∞–¥¬ª" src="assets/images/tea-sets.jpeg"/><h4>–ù–∞–±–æ—Ä –¥–ª—è —á–∞–µ–ø–∏—Ç–∏—è ¬´–ì–æ—Ä—è—á–∏–π —à–æ–∫–æ–ª–∞–¥¬ª</h4><p>–ü–æ–¥—Å—Ç–∞–≤–∫–∞ –ø–æ–¥ —á–∞–π–Ω–∏–∫ -19 —Å–º,4 –ø–æ–¥—Å—Ç–∞–≤–∫–∏ –ø–æ–¥ —á–∞—à–∫–∏- 14 —Å–º. –ü–æ–ª–∏—ç—Ñ–∏—Ä–Ω—ã–π —à–Ω—É—Ä, –¥–µ—Ä–µ–≤–æ
üü¢ –í –Ω–∞–ª–∏—á–∏–∏
–¶–µ–Ω–∞: 1800 ‚ÇΩ</p><button onclick="addToCart('–ù–∞–±–æ—Ä –¥–ª—è —á–∞–µ–ø–∏—Ç–∏—è ¬´–ì–æ—Ä—è—á–∏–π —à–æ–∫–æ–ª–∞–¥¬ª', 1800)" type="button">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button></div>
  </div>
</div>
<div class="modal" id="softToysModal">
<div class="modal-content">
<span class="close" onclick="closeModal('softToysModal')">√ó</span>
<h2>–ú—è–≥–∫–∏–µ –∏–≥—Ä—É—à–∫–∏</h2>
<div class="product-list"><div class="product-card"><img loading="lazy" alt="–¢–∞—Ä–∞–∫–∞–Ω –ö—É–∑—å–º–∞" src="assets/images/toys1.jpeg"/><h4>–¢–∞—Ä–∞–∫–∞–Ω –ö—É–∑—å–º–∞</h4><p>–†–∞–∑–º–µ—Ä 11 —Å–º –í–∞–ª—è–Ω–∞—è –∏–≥—Ä—É—à–∫–∞ –ù–∞—Ç—É—Ä–∞–ª—å–Ω–∞—è —à–µ—Ä—Å—Ç—å
üü¢ –í –Ω–∞–ª–∏—á–∏–∏
–¶–µ–Ω–∞: 1200 ‚ÇΩ</p><button onclick="addToCart('–¢–∞—Ä–∞–∫–∞–Ω –ö—É–∑—å–º–∞', 1200)" type="button">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button></div>
  </div>
</div>
<div class="modal" id="boxesModal">
<div class="modal-content">
<span class="close" onclick="closeModal('boxesModal')">√ó</span>
<h2>–®–∫–∞—Ç—É–ª–∫–∏</h2>
<div class="product-list" id="boxesPage1"><div class="product-card"><img loading="lazy" alt="–©–µ–ª–∫—É–Ω—á–∏–∫" src="assets/images/p1.png"/><h4>¬´–©–µ–ª–∫—É–Ω—á–∏–∫¬ª</h4><p>–†–∞–∑–º–µ—Ä: 15*20*9
üü¢ –í –Ω–∞–ª–∏—á–∏–∏
–¶–µ–Ω–∞: 1700 ‚ÇΩ</p><button onclick="addToCart('–®–∫–∞—Ç—É–ª–∫–∞ –©–µ–ª–∫—É–Ω—á–∏–∫', 1700)" type="button">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button></div>
  </div>
</div>
<div class="modal" id="souvenirsModal"><div class="modal-content"><span class="close" onclick="closeModal('souvenirsModal')">√ó</span><h2>–°—É–≤–µ–Ω–∏—Ä—ã</h2><div class="product-list"><div class="product-card"><img loading="lazy" alt="¬´–ü–æ–≥—Ä–∞–Ω–∏—á–Ω–∏–∫¬ª –ß–µ—Ö–æ–ª –Ω–∞ –±—É—Ç—ã–ª–∫—É" src="assets/images/gift1.jpeg"/><h4>¬´–ü–æ–≥—Ä–∞–Ω–∏—á–Ω–∏–∫¬ª –ß–µ—Ö–æ–ª –Ω–∞ –±—É—Ç—ã–ª–∫—É</h4><p>–í–µ–ª—é—Ä, —Ç–µ—Å—å–º–∞
üî¥ –ü–æ–¥ –∑–∞–∫–∞–∑
–¶–µ–Ω–∞: –¶–µ–Ω–∞ 1200</p><button onclick="addToCart('¬´–ü–æ–≥—Ä–∞–Ω–∏—á–Ω–∏–∫¬ª –ß–µ—Ö–æ–ª –Ω–∞ –±—É—Ç—ã–ª–∫—É', 1200)" type="button">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button></div>
  </div>
</div>
<div class="modal" id="christmasModal"><div class="modal-content"><span class="close" onclick="closeModal('christmasModal')">√ó</span><h2>–Å–ª–æ—á–Ω—ã–µ –∏–≥—Ä—É—à–∫–∏</h2><div class="product-list"><div class="product-card"><img loading="lazy" alt="–ù–∞–±–æ—Ä –µ–ª–æ—á–Ω—ã—Ö –∏–≥—Ä—É—à–µ–∫ ¬´–ë–µ–ª–∞—è –ø—Ç–∏—Ü–∞¬ª (–±–∞—Ä—Ö–∞—Ç, —Ç–µ—Å—å–º–∞, –∞—Ç–ª–∞—Å–Ω–∞—è –ª–µ–Ω—Ç–∞,–ª–µ–±—è–∂–∏–π –ø—É—Ö, —Å—Ç—Ä–∞–∑—ã, –∫—Ä—É–∂–µ–≤–æ)" src="assets/images/chris1.jpeg"/><h4>–ù–∞–±–æ—Ä –µ–ª–æ—á–Ω—ã—Ö –∏–≥—Ä—É—à–µ–∫ ¬´–ë–µ–ª–∞—è –ø—Ç–∏—Ü–∞¬ª (–±–∞—Ä—Ö–∞—Ç, —Ç–µ—Å—å–º–∞, –∞—Ç–ª–∞—Å–Ω–∞—è –ª–µ–Ω—Ç–∞,–ª–µ–±—è–∂–∏–π –ø—É—Ö, —Å—Ç—Ä–∞–∑—ã, –∫—Ä—É–∂–µ–≤–æ)</h4><p>–î–∏–∞–º–µ—Ç—Ä —à–∞—Ä–æ–≤ 8 —Å–º.
üü¢ –í –Ω–∞–ª–∏—á–∏–∏
–¶–µ–Ω–∞: –¶–µ–Ω–∞ –∫–æ–º–ø–ª–µ–∫—Ç–∞ –∏–∑ 3 —à–∞—Ä–æ–≤ 1700</p><button onclick="addToCart('–ù–∞–±–æ—Ä –µ–ª–æ—á–Ω—ã—Ö –∏–≥—Ä—É—à–µ–∫ ¬´–ë–µ–ª–∞—è –ø—Ç–∏—Ü–∞¬ª (–±–∞—Ä—Ö–∞—Ç, —Ç–µ—Å—å–º–∞, –∞—Ç–ª–∞—Å–Ω–∞—è –ª–µ–Ω—Ç–∞,–ª–µ–±—è–∂–∏–π –ø—É—Ö, —Å—Ç—Ä–∞–∑—ã, –∫—Ä—É–∂–µ–≤–æ)',O00)" type="button">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button></div>
  </div>
</div>
<script>
// Safer modal open delegation for catalog items
document.addEventListener('DOMContentLoaded', function(){
  document.querySelectorAll('.catalog-item[onclick]').forEach(function(el){
    const match = (el.getAttribute('onclick') || '').match(/openModal\('([^']+)'\)/);
    if (!match) return;
    const id = match[1];
    el.addEventListener('click', function(evt){
      evt.preventDefault();
      evt.stopPropagation();
      if (typeof openModal === 'function') {
        openModal(id);
      } else {
        const elModal = document.getElementById(id);
        if (elModal) elModal.style.display = 'block';
      }
    }, { capture: false });
  });
});
</script>

<footer class="site-footer">
  <div class="footer-content">
    <p>–°–≤—è–∑–∞—Ç—å—Å—è —Å –≤–ª–∞–¥–µ–ª—å—Ü–µ–º —Å–∞–π—Ç–∞:</p>
    <p>
      üì± –¢–µ–ª–µ—Ñ–æ–Ω:
      <a href="https://t.me/+79283469654" target="_blank">Telegram</a> |
      <a href="https://wa.me/79283469654" target="_blank">WhatsApp</a>
    </p>
    <p>
      üåê –í–ö–æ–Ω—Ç–∞–∫—Ç–µ:
      <a href="https://vk.com/annaanty" target="_blank">–°—Ç—Ä–∞–Ω–∏—Ü–∞ 1</a> |
      <a href="https://vk.com/annaanty" target="_blank">–°—Ç—Ä–∞–Ω–∏—Ü–∞ 2</a>
    </p>
  </div>
</footer>

</body>
</html>
